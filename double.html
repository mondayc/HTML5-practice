<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Canvas AIP</title>
  <style type="text/css">
  *{
    margin: 0;
    padding: 0;
  }

  </style>
</head>
<body>
	<canvas id="tree" style="background-color: #aeeffe">
		
	</canvas>
<script type="text/javascript">

function drawTop(context){
  //使用渐变
  var trunkGradient = context.createLinearGradient(60,280,80,280);
  trunkGradient.addColorStop(0,'#663300');
  trunkGradient.addColorStop(0.4,'#996600');
  trunkGradient.addColorStop(1,'#552200');
  context.fillStyle = trunkGradient;
  context.fillRect(60,280,20,40);
  
  var carnopyShadow = context.createLinearGradient(60,280,70,320);
  carnopyShadow.addColorStop(0,'rgba(0,0,0,0.4)');
  carnopyShadow.addColorStop(0.4,'rgba(0,0,0,0)');
  context.fillStyle = carnopyShadow;
  context.fillRect(60,280,20,40);

  context.lineWidth = 4;
  context.lineJoin = 'round';
  context.strokeStyle = '#80cf4b';
  context.fillStyle = '#92cf4b';
  context.beginPath();
  context.moveTo(20,280);
  context.lineTo(50,260);
  context.lineTo(30,260);
  context.lineTo(60,240);
  context.lineTo(40,240);
  context.lineTo(70,220);
  context.lineTo(100,240);
  context.lineTo(80,240);
  context.lineTo(110,260);
  context.lineTo(90,260);
  context.lineTo(120,280);
  context.closePath(20,280);
  context.fill();
    context.stroke();

}
function createShadow(context){
  context.lineWidth = 4;
  context.lineJoin = 'round';
  context.fillStyle = 'rgba(0,0,0,0.2)';
  context.beginPath();
  context.moveTo(20,280);
  context.lineTo(50,260);
  context.lineTo(30,260);
  context.lineTo(60,240);
  context.lineTo(40,240);
  context.lineTo(70,220);
  context.lineTo(100,240);
  context.lineTo(80,240);
  context.lineTo(110,260);
  context.lineTo(90,260);
  context.lineTo(120,280);
  context.closePath(20,280);
  context.fillRect(60,280,20,40);
  context.fill();
}
  function drawTree(){
    // 取得 canvas 元素 及其绘图上下文
    var canvas = document.getElementById('tree');
    var context = canvas.getContext('2d');
    
    // 设置属性
    canvas.width = 800;
    canvas.height = 800;

    context.save();
    context.translate(175,128)
    context.transform(1,0,-0.9,1,0,0);
    context.scale(1,0.6);
    createShadow(context);
    context.restore();

    context.save();
    context.translate(400,100);
    context.scale(2,2);
    context.translate(175,128)
    context.transform(1,0,-0.9,1,0,0);
    context.scale(1,0.6);
    createShadow(context);
    context.restore();

    context.save();
    context.translate(380,0);
    context.scale(1.1,1.1);
    context.translate(175,128)
    context.transform(1,0,-0.9,1,0,0);
    context.scale(1,0.6);
    createShadow(context);
    context.restore();

    context.save();
    context.translate(100,300);
    context.scale(1.2,1.2);
    context.translate(175,128)
    context.transform(1,0,-0.9,1,0,0);
    context.scale(1,0.6);
    createShadow(context);
    context.restore();

    context.save();
    drawTop(context);
    context.restore();

    context.save();
    context.beginPath();
    context.moveTo(-10,600);
    context.quadraticCurveTo(150,350,400,450);
    context.quadraticCurveTo(580,480,815,250);
    context.strokeStyle = '#9d7c42';
    context.lineWidth = 20;
    context.stroke();
    context.restore();

    var gravel = new Image();
    gravel.src = "http://www.tetu.com.cn/UploadFile/SUNVP-L005.jpg";

    context.strokeStyle = '#9d7c42';
    context.strokeStyle = context.createPattern(gravel,'repeat');
    context.lineWidth = 20;
    context.stroke();
    gravel.onload = function(){
      drawTree();
    }

    context.save();
    context.translate(400,100);
    context.scale(2,2);
    drawTop(context);
    context.restore();

    context.save();
    context.translate(380,0);
    context.scale(1.1,1.1);
    drawTop(context);
    context.restore();

    context.save();
    context.translate(100,300);
    context.scale(1.2,1.2);
    drawTop(context);
    context.restore();

    context.save();
    context.font = "80px impact";
    context.fillStyle = '#2cadfe';
    context.textAlign = 'center';
    context.fillText('Hello Trees!',400,100,600);
    context.shadowColor = '#000';
    context.shadowOffsetX = 150;
    context.shadowOffsetY = -10;
    context.shadowBlur = 2;

    context.restore();
    
  }
  window.addEventListener("load",drawTree,true);
</script>
</body>
</html>